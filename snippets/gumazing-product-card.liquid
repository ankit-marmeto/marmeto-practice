{% liquid
  assign current_variant = product.selected_or_first_available_variant
  assign discount_percentage = current_variant.compare_at_price | minus: current_variant.price | times: 100 | divided_by: current_variant.compare_at_price
  assign current_featured_image = current_variant.image | default: product.featured_image
  assign secondary_image = product.images[1] | default: product.featured_image
%}

<custom-product-card
  class="custom-product-list__item grid__item"
  data-product-handle="{{ product.handle }}"
  data-section-id="custom-product-card">
  <div class="custom-product-list__product-card card">
    <div class="media-wrapper isolate">
      <a href="{{ product.url | within: collection }}" class="custom-product-list__product-card-media card-media img-box">
        <!-- Default Image -->
        {%- render 'responsive-picture'
          , desktopImage: current_featured_image
          , class: "image-fit" -%}
      </a>

      <span class="border-bg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="280"
          height="54"
          viewBox="0 0 280 54"
          fill="none">
          <path d="M0 50.8985C0 43.4426 4.15366 36.5673 10.8344 33.2569C101.391 -11.616 161.561 -10.672 267.888 33.6214C275.251 36.6887 280 43.9299 280 51.9061V324C280 335.046 271.046 344 260 344H20C8.95431 344 0 335.046 0 324V50.8985Z" fill="white"></path>
          <path
            d="M1 50.8985C1 43.8122 4.94752 37.29 11.2784 34.1529C56.4727 11.7582 93.9975 0.839086 133.443 1.00179C172.906 1.16457 214.389 12.4183 267.503 34.5445C274.487 37.4539 279 44.3267 279 51.9061V324C279 334.493 270.493 343 260 343H20C9.5066 343 1 334.493 1 324V50.8985Z"
            stroke="#454545"
            stroke-opacity="0.2"
            stroke-width="2"></path>
        </svg>
      </span> 
    </div>


    <div class="custom-product-list__product-card-info card-info">
      <a href="{{ product.url | within: collection }}" class="custom-product-list__product-card-title card-title">{{ product.title }}</a>

      <div class="product-card__review-coins">
        <div class="review-container">
          <div class="review-stars">⭐</div>
          <div class="review-stars">⭐</div>
          <div class="review-stars">⭐</div>
          <div class="review-stars">⭐</div>
          <div class="review-stars">⭐</div>
        </div>
        <div class="review-number">(4)</div>
      </div>

      <div class="unique-selling-text">
        <p>Buy and earn 🦁 points</p>
      </div>

      <div class="tagged-content">
        No Added Sugar
      </div>

      <div class="price__functionality">
        <div class="product-price">{{ current_variant.price | money }}</div>
        <div class="quick-view">
            <modal-opener data-modal="#QuickAdd-{{ product.id }}">
                <button
                  id="{{ product_form_id }}-submit"
                  type="submit"
                  name="add"
                  class="quick-look"
                  aria-haspopup="dialog"
                  aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ product.id }}"
                  data-product-url="{{ product.url }}"
                >
                <span class="icon-eye"> 
                    <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33" fill="none">
                        <path d="M31.654 16.2697C31.6102 16.1709 30.5515 13.8222 28.1977 11.4684C25.0615 8.33218 21.1002 6.67468 16.7402 6.67468C12.3802 6.67468 8.41897 8.33218 5.28272 11.4684C2.92897 13.8222 1.86522 16.1747 1.82647 16.2697C1.76961 16.3976 1.74023 16.536 1.74023 16.6759C1.74023 16.8159 1.76961 16.9543 1.82647 17.0822C1.87022 17.1809 2.92897 19.5284 5.28272 21.8822C8.41897 25.0172 12.3802 26.6747 16.7402 26.6747C21.1002 26.6747 25.0615 25.0172 28.1977 21.8822C30.5515 19.5284 31.6102 17.1809 31.654 17.0822C31.7108 16.9543 31.7402 16.8159 31.7402 16.6759C31.7402 16.536 31.7108 16.3976 31.654 16.2697ZM16.7402 24.6747C12.8927 24.6747 9.53147 23.2759 6.74897 20.5184C5.60728 19.383 4.63596 18.0884 3.86522 16.6747C4.63575 15.2609 5.60709 13.9662 6.74897 12.8309C9.53147 10.0734 12.8927 8.67468 16.7402 8.67468C20.5877 8.67468 23.949 10.0734 26.7315 12.8309C27.8754 13.9659 28.8488 15.2606 29.6215 16.6747C28.7202 18.3572 24.794 24.6747 16.7402 24.6747ZM16.7402 10.6747C15.5535 10.6747 14.3935 11.0266 13.4068 11.6859C12.4201 12.3452 11.6511 13.2822 11.1969 14.3786C10.7428 15.4749 10.624 16.6813 10.8555 17.8452C11.087 19.0091 11.6585 20.0782 12.4976 20.9173C13.3367 21.7564 14.4058 22.3279 15.5697 22.5594C16.7336 22.7909 17.94 22.6721 19.0363 22.218C20.1327 21.7638 21.0697 20.9948 21.729 20.0081C22.3883 19.0214 22.7402 17.8614 22.7402 16.6747C22.7386 15.0839 22.1059 13.5587 20.981 12.4339C19.8562 11.309 18.331 10.6763 16.7402 10.6747ZM16.7402 20.6747C15.9491 20.6747 15.1757 20.4401 14.5179 20.0006C13.8601 19.561 13.3475 18.9363 13.0447 18.2054C12.742 17.4745 12.6627 16.6702 12.8171 15.8943C12.9714 15.1184 13.3524 14.4057 13.9118 13.8463C14.4712 13.2868 15.1839 12.9059 15.9599 12.7515C16.7358 12.5972 17.54 12.6764 18.271 12.9792C19.0019 13.2819 19.6266 13.7946 20.0661 14.4524C20.5056 15.1102 20.7402 15.8836 20.7402 16.6747C20.7402 17.7355 20.3188 18.753 19.5686 19.5031C18.8185 20.2533 17.8011 20.6747 16.7402 20.6747Z" fill="#454545"></path>
                    </svg> 
                </span>
  
                  {%- if horizontal_quick_add -%}
                    <span class="icon-wrap">
                      {{- 'icon-arrow.svg' | inline_asset_content -}}
                    </span>
                  {%- endif -%}
                  {%- render 'loading-spinner' -%}
                </button>
          </modal-opener>
           
        </div>
      </div>

      <quick-add-modal id="QuickAdd-{{ product.id }}" class="quick-add-modal">
                <div
                  role="dialog"
                  aria-label="{{ 'products.product.choose_product_options' | t: product_name: product.title | escape }}"
                  aria-modal="true"
                  class="quick-add-modal__content global-settings-popup"
                  tabindex="-1"
                >
                  <button
                    id="ModalClose-{{ product.id }}"
                    type="button"
                    class="quick-add-modal__toggle"
                    aria-label="{{ 'accessibility.close' | t }}"
                  >
                    {{- 'icon-close.svg' | inline_asset_content -}}
                  </button>
                  <div id="QuickAddInfo-{{ product.id }}" class="quick-add-modal__content-info"></div>
                </div>
              </quick-add-modal>

      <button type="submit" class="add-to-cart" data-variant-id="{{ product.selected_or_first_available_variant.id }}">Add to cart</button> 
    </div>
  </div>
</custom-product-card>